<%
if scope['portauthority::cluster_members'].empty
  endpoints = ['localhost']
else
  endpoints = scope['portauthority::cluster_members']
end
-%>
---
:debug: false
:syslog: true
:vip:
  :interval: 5
  :ip: <%= scope['portauthority::floating_ip'] %>
  :mask: <%= scope['portauthority::floating_ip_mask'] %>
  :interface: <%= scope['portauthority::floating_ip_iface'] %>
:lb:
  :image: <%= scope['portauthority::lb_image'] %>
  :name: <%= scope['portauthority::lb_name'] %>
  :network: stackdocks
:etcd:
  :endpoints: <% endpoints.each do |e| -%>
    - http://<%= e %>:2379
<% end -%>
  :interval: 2
  :timeout: 2
:icmp:
  :count: 5
  :interval: 1
:arping:
  :count: 2
  :wait: 1
:commands:
  :arping: /usr/bin/arping
  :arp: /usr/sbin/arp
  :iproute: /bin/ip
